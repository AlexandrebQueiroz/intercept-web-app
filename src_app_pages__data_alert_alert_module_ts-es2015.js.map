{"version":3,"file":"src_app_pages__data_alert_alert_module_ts-es2015.js","mappings":"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","sources":["./src/app/pages/_data/alert/alert-routing.module.ts","./src/app/pages/_data/alert/alert.component.ts","./src/app/pages/_data/alert/alert.component.html","./src/app/pages/_data/alert/alert.module.ts","./src/app/pages/_data/alert/alert.service.ts","./src/app/pages/_data/alert/filtro/filtro.component.ts","./src/app/pages/_data/alert/filtro/filtro.component.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AlertComponent } from './alert.component';\r\n\r\nconst routes: Routes = [{\r\n  path: '',\r\n  component: AlertComponent,\r\n}];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AlertRoutingModule {\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { AlertService } from './alert.service';\r\n\r\n@Component({\r\n  selector: 'alert',\r\n  styleUrls: ['./alert.component.scss'],\r\n  templateUrl: './alert.component.html',\r\n})\r\nexport class AlertComponent implements OnInit {\r\n\r\n  public data: any;\r\n  public loaded = false;\r\n\r\n  constructor(\r\n    public service: AlertService,\r\n    ){\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.filtrar({});\r\n  }\r\n  \r\n  public filtrar(filtro){\r\n    this.loaded = false;\r\n    this.service.get(filtro).subscribe(\r\n      data => {\r\n        this.data = data;\r\n        this.loaded = true;\r\n      }\r\n    );\r\n  }\r\n\r\n}\r\n","\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <filtro [loaded]=\"loaded\" (filtrar)=\"filtrar($event)\" ></filtro>\r\n    </nb-card>  \r\n  </div>\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade Alertas Gerados</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadeAlertasGerados *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade Alertas Primeira Passagem</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadePrimeiraPassagem *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade enviados</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadeEnviados *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NbDateFnsDateModule } from '@nebular/date-fns';\r\nimport { NbMomentDateModule } from '@nebular/moment';\r\nimport { NbAccordionModule, NbButtonModule, NbCardModule, NbDatepickerModule, NbInputModule, NbSpinnerModule } from '@nebular/theme';\r\nimport { CustomChartsModule } from '../../_component/custom-charts.module';\r\nimport { AlertRoutingModule } from './alert-routing.module';\r\nimport { AlertComponent } from './alert.component';\r\nimport { AlertService } from './alert.service';\r\nimport { FiltroComponent } from './filtro/filtro.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    FormsModule,\r\n    NbCardModule,\r\n    ReactiveFormsModule,\r\n    AlertRoutingModule,\r\n    CustomChartsModule,\r\n    NbAccordionModule,\r\n    NbDatepickerModule,\r\n    NbMomentDateModule,\r\n    NbDateFnsDateModule.forChild({format: 'dd MM yyyy'}),\r\n    NbSpinnerModule,\r\n    NbInputModule,\r\n    NbButtonModule,\r\n    CommonModule,\r\n  ],\r\n  declarations: [\r\n    AlertComponent,\r\n    FiltroComponent,\r\n  ],\r\n  providers: [\r\n    AlertService\r\n  ],\r\n})\r\nexport class AlertModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport moment from 'moment';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Injectable()\r\nexport class AlertService {\r\n\r\n  constructor(public http: HttpClient) {\r\n\r\n  }\r\n\r\n  get(filtro?: any): Observable<any> {\r\n    const parameter = this.prepareFiltro(filtro);\r\n    return this.http.get<any>(`${environment.alerta.listar}/${parameter.inicio}/${parameter.final}`);\r\n  }\r\n\r\n  private prepareFiltro(filtro: any){\r\n    \r\n    if(!filtro){\r\n      filtro = {};\r\n      filtro.inicioFormatado = moment(new Date());\r\n      filtro.finalFormatado = moment(new Date()).add(-3, 'months');\r\n    } \r\n    \r\n    const inicioFormatado = moment(filtro?.inicio).format(environment.format.data)\r\n    const finalFormatado = moment(filtro?.finalFormatado).format(environment.format.data)\r\n\r\n    return {inicio: inicioFormatado, final: finalFormatado };\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'filtro',\r\n  templateUrl: './filtro.component.html',\r\n})\r\nexport class FiltroComponent  {\r\n\r\n  @Input()\r\n  public loaded = false;\r\n\r\n  @Output()\r\n  public filtrar = new EventEmitter()\r\n\r\n  public form: FormGroup;\r\n\r\n  private today = new Date();\r\n  private lastMonth = moment(new Date()).add(-1, 'months').toDate() \r\n\r\n  constructor(\r\n    public fb: FormBuilder,\r\n    ){\r\n    this.createForm();\r\n  }\r\n\r\n  public createForm() {\r\n    this.form = this.fb.group({\r\n      inicio: new FormControl(this.lastMonth),\r\n      final: new FormControl(this.today),\r\n    });\r\n  }\r\n  \r\n  public onSubmit(){\r\n    this.filtrar.emit(this.form.value);\r\n  }\r\n  \r\n  public getStatus(field: any): string {\r\n\r\n     if (field.valid) {\r\n       return 'success';\r\n     }\r\n\r\n     return 'danger';\r\n  }\r\n\r\n  public get inicio() {\r\n    return this.form.get('inicio');\r\n  }\r\n\r\n  public get final() {\r\n    return this.form.get('final');\r\n  }\r\n}\r\n","<nb-accordion>\r\n  <nb-accordion-item>\r\n    \r\n    <nb-accordion-item-header>\r\n      Filtros\r\n    </nb-accordion-item-header>\r\n\r\n    <nb-accordion-item-body [nbSpinner]=\"!loaded\">\r\n    \r\n      <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\" class=\"needs-validation\" novalidate >\r\n        \r\n        <div class=\"row\">\r\n          <div class=\"col-xl-6 col-md-6 col-12 form-group\">\r\n            <input \r\n                nbInput \r\n                fullWidth \r\n                class=\"form-control\"\r\n                placeholder=\"Inicio\" \r\n                [nbDatepicker]=\"inicioPicker\"\r\n                [formControl]=\"inicio\" \r\n                >\r\n              <nb-datepicker #inicioPicker>\r\n              </nb-datepicker>\r\n          </div>\r\n\r\n          <div class=\"col-xl-6 col-md-6  col-12 form-group\">\r\n            <input \r\n              nbInput \r\n              fullWidth \r\n              class=\"form-control\"\r\n              placeholder=\"Final\" \r\n              [nbDatepicker]=\"finalPicker\"\r\n              [formControl]=\"final\" \r\n              >\r\n            <nb-datepicker #finalPicker>\r\n            </nb-datepicker>\r\n          </div>\r\n\r\n          <div class=\"offset-xl-9 col-xl-3 offset-md-8 col-md-4 col-12 form-group\">\r\n            <button class=\"control-button form-control\" fullWidth nbButton type=\"submit\" >\r\n              Buscar\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </form>\r\n    </nb-accordion-item-body>\r\n  </nb-accordion-item>\r\n</nb-accordion>"],"names":[],"sourceRoot":"webpack:///"}