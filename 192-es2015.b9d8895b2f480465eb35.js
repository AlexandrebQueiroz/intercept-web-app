"use strict";(self.webpackChunkngx_admin=self.webpackChunkngx_admin||[]).push([[192],{17192:function(e,t,n){n.r(t),n.d(t,{AlertModule:function(){return w}});var r=n(38583),a=n(3679),i=n(94318),o=n(68242),l=n(53302),d=n(35834),c=n(54655),s=n(37716),m=n(16738),h=n.n(m),u=n(92340),f=n(91841);let p=(()=>{class e{constructor(e){this.http=e}get(e){const t=this.prepareFiltro(e);return this.http.get(`${u.N.alerta.listar}/${t.inicio}/${t.final}`)}prepareFiltro(e){return e||((e={}).inicioFormatado=h()(new Date),e.finalFormatado=h()(new Date).add(-3,"months")),{inicio:h()(null==e?void 0:e.inicio).format(u.N.format.data),final:h()(null==e?void 0:e.finalFormatado).format(u.N.format.data)}}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(f.eN))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e){this.fb=e,this.loaded=!1,this.filtrar=new s.EventEmitter,this.today=new Date,this.lastMonth=h()(new Date).add(-1,"months").toDate(),this.createForm()}createForm(){this.form=this.fb.group({inicio:new a.NI(this.lastMonth),final:new a.NI(this.today)})}onSubmit(){this.filtrar.emit(this.form.value)}getStatus(e){return e.valid?"success":"danger"}get inicio(){return this.form.get("inicio")}get final(){return this.form.get("final")}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(a.qu))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["filtro"]],inputs:{loaded:"loaded"},outputs:{filtrar:"filtrar"},decls:18,vars:6,consts:[[3,"nbSpinner"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-xl-6","col-md-6","col-12","form-group"],["nbInput","","fullWidth","","placeholder","Inicio",1,"form-control",3,"nbDatepicker","formControl"],["inicioPicker",""],["nbInput","","fullWidth","","placeholder","Final",1,"form-control",3,"nbDatepicker","formControl"],["finalPicker",""],[1,"offset-xl-9","col-xl-3","offset-md-8","col-md-4","col-12","form-group"],["fullWidth","","nbButton","","type","submit",1,"control-button","form-control"]],template:function(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"nb-accordion"),s.\u0275\u0275elementStart(1,"nb-accordion-item"),s.\u0275\u0275elementStart(2,"nb-accordion-item-header"),s.\u0275\u0275text(3," Filtros "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"nb-accordion-item-body",0),s.\u0275\u0275elementStart(5,"form",1),s.\u0275\u0275listener("ngSubmit",function(){return t.onSubmit()}),s.\u0275\u0275elementStart(6,"div",2),s.\u0275\u0275elementStart(7,"div",3),s.\u0275\u0275element(8,"input",4),s.\u0275\u0275element(9,"nb-datepicker",null,5),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"div",3),s.\u0275\u0275element(12,"input",6),s.\u0275\u0275element(13,"nb-datepicker",null,7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"div",8),s.\u0275\u0275elementStart(16,"button",9),s.\u0275\u0275text(17," Buscar "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275reference(10),n=s.\u0275\u0275reference(14);s.\u0275\u0275advance(4),s.\u0275\u0275property("nbSpinner",!t.loaded),s.\u0275\u0275advance(1),s.\u0275\u0275property("formGroup",t.form),s.\u0275\u0275advance(3),s.\u0275\u0275property("nbDatepicker",e)("formControl",t.inicio),s.\u0275\u0275advance(4),s.\u0275\u0275property("nbDatepicker",n)("formControl",t.final)}},directives:[l.qCO,l.SaG,l.YZd,l.AvE,l.Q7R,a._Y,a.JL,a.sg,l.h8i,l.$kf,a.Fj,a.JJ,a.oH,l.B4C,l.DPz],encapsulation:2}),e})();var g=n(72191);let v=(()=>{class e{constructor(e){this.theme=e,this.results=[],this.showLegend=!0,this.showXAxis=!0,this.showYAxis=!0,this.xAxisLabel="Produtos",this.yAxisLabel="Quantidade"}ngOnInit(){var e;null===(e=this.data)||void 0===e||e.forEach(e=>{this.results.push({name:e.titulo,value:e.valor})}),this.themeSubscription=this.theme.getJsTheme().subscribe(e=>{const t=e.variables;this.colorScheme={domain:[t.primaryLight,t.infoLight,t.successLight,t.warningLight,t.dangerLight]}})}ngOnDestroy(){this.themeSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(l.WMF))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["d3-bar-chart"]],inputs:{data:"data"},decls:1,vars:8,consts:[[3,"scheme","results","xAxis","yAxis","legend","legendTitle","xAxisLabel","yAxisLabel"]],template:function(e,t){1&e&&s.\u0275\u0275element(0,"ngx-charts-bar-vertical",0),2&e&&s.\u0275\u0275property("scheme",t.colorScheme)("results",t.results)("xAxis",t.showXAxis)("yAxis",t.showYAxis)("legend",t.showLegend)("legendTitle","Legenda")("xAxisLabel",t.xAxisLabel)("yAxisLabel",t.yAxisLabel)},directives:[g.K$],encapsulation:2}),e})();function y(e,t){if(1&e&&s.\u0275\u0275element(0,"d3-bar-chart",4),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275property("data",e.data.quantidadeAlertasGerados)}}function x(e,t){if(1&e&&s.\u0275\u0275element(0,"d3-bar-chart",4),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275property("data",e.data.quantidadePrimeiraPassagem)}}function S(e,t){if(1&e&&s.\u0275\u0275element(0,"d3-bar-chart",4),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275property("data",e.data.quantidadeEnviados)}}const C=[{path:"",component:(()=>{class e{constructor(e){this.service=e,this.loaded=!1}ngOnInit(){this.filtrar({})}filtrar(e){this.loaded=!1,this.service.get(e).subscribe(e=>{this.data=e,this.loaded=!0})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(p))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["alert"]],decls:24,vars:4,consts:[[1,"row"],[1,"col-12"],[3,"loaded","filtrar"],[3,"data",4,"ngIf"],[3,"data"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"div",1),s.\u0275\u0275elementStart(2,"nb-card"),s.\u0275\u0275elementStart(3,"filtro",2),s.\u0275\u0275listener("filtrar",function(e){return t.filtrar(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"div",1),s.\u0275\u0275elementStart(5,"nb-card"),s.\u0275\u0275elementStart(6,"nb-card-header"),s.\u0275\u0275text(7,"Quantidade Alertas Gerados"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(8,"nb-card-body"),s.\u0275\u0275template(9,y,1,1,"d3-bar-chart",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(10,"div",0),s.\u0275\u0275elementStart(11,"div",1),s.\u0275\u0275elementStart(12,"nb-card"),s.\u0275\u0275elementStart(13,"nb-card-header"),s.\u0275\u0275text(14,"Quantidade Alertas Primeira Passagem"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"nb-card-body"),s.\u0275\u0275template(16,x,1,1,"d3-bar-chart",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"div",0),s.\u0275\u0275elementStart(18,"div",1),s.\u0275\u0275elementStart(19,"nb-card"),s.\u0275\u0275elementStart(20,"nb-card-header"),s.\u0275\u0275text(21,"Quantidade enviados"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(22,"nb-card-body"),s.\u0275\u0275template(23,S,1,1,"d3-bar-chart",3),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("loaded",t.loaded),s.\u0275\u0275advance(6),s.\u0275\u0275property("ngIf",t.loaded),s.\u0275\u0275advance(7),s.\u0275\u0275property("ngIf",t.loaded),s.\u0275\u0275advance(7),s.\u0275\u0275property("ngIf",t.loaded))},directives:[l.Asz,b,l.ndF,l.yKW,r.O5,v],styles:[".nb-theme-default   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]{display:block;height:28.875rem;width:100%}.nb-theme-default   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]     chart{display:block;height:100%;width:100%}.nb-theme-dark   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]{display:block;height:28.875rem;width:100%}.nb-theme-dark   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]     chart{display:block;height:100%;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]{display:block;height:28.875rem;width:100%}.nb-theme-cosmic   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]     chart{display:block;height:100%;width:100%}.nb-theme-corporate   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]{display:block;height:28.875rem;width:100%}.nb-theme-corporate   [_nghost-%COMP%]   d3-bar-chart[_ngcontent-%COMP%]     chart{display:block;height:100%;width:100%}.full-name-inputs[_ngcontent-%COMP%], .validation-checkboxes[_ngcontent-%COMP%]{display:flex;margin:0 -.5rem}.full-name-inputs[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .validation-checkboxes[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 .5rem}"]}),e})()}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(C)],c.Bz]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({providers:[p],imports:[[a.u5,l.zyh,a.UX,E,d.H,l.oGl,l.OA,o.i,i.k.forChild({format:"dd MM yyyy"}),l.uuI,l.nKr,l.T2N,r.ez]]}),e})()}}]);