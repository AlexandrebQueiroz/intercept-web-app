{"version":3,"mappings":"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","names":["routes","path","component","_alert_component__WEBPACK_IMPORTED_MODULE_0__","AlertRoutingModule","_angular_router__WEBPACK_IMPORTED_MODULE_2__","imports","exports","_angular_core__WEBPACK_IMPORTED_MODULE_3__","AlertComponent","service","filtrar","filtro","loaded","get","subscribe","data","selectors","decls","vars","consts","template","ctx","AlertModule","_alert_service__WEBPACK_IMPORTED_MODULE_3__","_angular_forms__WEBPACK_IMPORTED_MODULE_6__","_nebular_theme__WEBPACK_IMPORTED_MODULE_7__","_alert_routing_module__WEBPACK_IMPORTED_MODULE_1__","_component_custom_charts_module__WEBPACK_IMPORTED_MODULE_0__","_nebular_moment__WEBPACK_IMPORTED_MODULE_8__","_nebular_date_fns__WEBPACK_IMPORTED_MODULE_9__","format","_angular_common__WEBPACK_IMPORTED_MODULE_10__","declarations","_alert_component__WEBPACK_IMPORTED_MODULE_2__","_filtro_filtro_component__WEBPACK_IMPORTED_MODULE_4__","AlertService","http","parameter","prepareFiltro","_environments_environment__WEBPACK_IMPORTED_MODULE_1__","inicio","inicioFormatado","moment__WEBPACK_IMPORTED_MODULE_0___default","Date","finalFormatado","add","_angular_core__WEBPACK_IMPORTED_MODULE_2__","factory","FiltroComponent","fb","_angular_core__WEBPACK_IMPORTED_MODULE_1__","toDate","createForm","form","group","_angular_forms__WEBPACK_IMPORTED_MODULE_2__","lastMonth","today","emit","value","field","valid","inputs","outputs"],"sources":["webpack:///src/app/pages/_data/alert/alert-routing.module.ts","webpack:///src/app/pages/_data/alert/alert.component.html","webpack:///src/app/pages/_data/alert/alert.component.ts","webpack:///src/app/pages/_data/alert/alert.module.ts","webpack:///src/app/pages/_data/alert/alert.service.ts","webpack:///src/app/pages/_data/alert/filtro/filtro.component.ts","webpack:///src/app/pages/_data/alert/filtro/filtro.component.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AlertComponent } from './alert.component';\r\n\r\nconst routes: Routes = [{\r\n  path: '',\r\n  component: AlertComponent,\r\n}];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AlertRoutingModule {\r\n}\r\n","\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <filtro [loaded]=\"loaded\" (filtrar)=\"filtrar($event)\" ></filtro>\r\n    </nb-card>  \r\n  </div>\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade Alertas Gerados</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadeAlertasGerados *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade Alertas Primeira Passagem</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadePrimeiraPassagem *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n<div class=\"row\">\r\n\r\n  <div class=\"col-12\">\r\n    <nb-card>\r\n      <nb-card-header>Quantidade enviados</nb-card-header>\r\n\r\n      <nb-card-body>\r\n        <d3-bar-chart [data]=data.quantidadeEnviados *ngIf=\"loaded\"></d3-bar-chart>\r\n      </nb-card-body>\r\n    \r\n    </nb-card>\r\n  </div>\r\n\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { AlertService } from './alert.service';\r\n\r\n@Component({\r\n  selector: 'alert',\r\n  styleUrls: ['./alert.component.scss'],\r\n  templateUrl: './alert.component.html',\r\n})\r\nexport class AlertComponent implements OnInit {\r\n\r\n  public data: any;\r\n  public loaded = false;\r\n\r\n  constructor(\r\n    public service: AlertService,\r\n    ){\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.filtrar({});\r\n  }\r\n  \r\n  public filtrar(filtro){\r\n    this.loaded = false;\r\n    this.service.get(filtro).subscribe(\r\n      data => {\r\n        this.data = data;\r\n        this.loaded = true;\r\n      }\r\n    );\r\n  }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NbDateFnsDateModule } from '@nebular/date-fns';\r\nimport { NbMomentDateModule } from '@nebular/moment';\r\nimport { NbAccordionModule, NbButtonModule, NbCardModule, NbDatepickerModule, NbInputModule, NbSpinnerModule } from '@nebular/theme';\r\nimport { CustomChartsModule } from '../../_component/custom-charts.module';\r\nimport { AlertRoutingModule } from './alert-routing.module';\r\nimport { AlertComponent } from './alert.component';\r\nimport { AlertService } from './alert.service';\r\nimport { FiltroComponent } from './filtro/filtro.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    FormsModule,\r\n    NbCardModule,\r\n    ReactiveFormsModule,\r\n    AlertRoutingModule,\r\n    CustomChartsModule,\r\n    NbAccordionModule,\r\n    NbDatepickerModule,\r\n    NbMomentDateModule,\r\n    NbDateFnsDateModule.forChild({format: 'dd MM yyyy'}),\r\n    NbSpinnerModule,\r\n    NbInputModule,\r\n    NbButtonModule,\r\n    CommonModule,\r\n  ],\r\n  declarations: [\r\n    AlertComponent,\r\n    FiltroComponent,\r\n  ],\r\n  providers: [\r\n    AlertService\r\n  ],\r\n})\r\nexport class AlertModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport moment from 'moment';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\n\r\n@Injectable()\r\nexport class AlertService {\r\n\r\n  constructor(public http: HttpClient) {\r\n\r\n  }\r\n\r\n  get(filtro?: any): Observable<any> {\r\n    const parameter = this.prepareFiltro(filtro);\r\n    return this.http.get<any>(`${environment.alerta.listar}/${parameter.inicio}/${parameter.final}`);\r\n  }\r\n\r\n  private prepareFiltro(filtro: any){\r\n    \r\n    if(!filtro){\r\n      filtro = {};\r\n      filtro.inicioFormatado = moment(new Date());\r\n      filtro.finalFormatado = moment(new Date()).add(-3, 'months');\r\n    } \r\n    \r\n    const inicioFormatado = moment(filtro?.inicio).format(environment.format.data)\r\n    const finalFormatado = moment(filtro?.finalFormatado).format(environment.format.data)\r\n\r\n    return {inicio: inicioFormatado, final: finalFormatado };\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\r\nimport moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'filtro',\r\n  templateUrl: './filtro.component.html',\r\n})\r\nexport class FiltroComponent  {\r\n\r\n  @Input()\r\n  public loaded = false;\r\n\r\n  @Output()\r\n  public filtrar = new EventEmitter()\r\n\r\n  public form: FormGroup;\r\n\r\n  private today = new Date();\r\n  private lastMonth = moment(new Date()).add(-1, 'months').toDate() \r\n\r\n  constructor(\r\n    public fb: FormBuilder,\r\n    ){\r\n    this.createForm();\r\n  }\r\n\r\n  public createForm() {\r\n    this.form = this.fb.group({\r\n      inicio: new FormControl(this.lastMonth),\r\n      final: new FormControl(this.today),\r\n    });\r\n  }\r\n  \r\n  public onSubmit(){\r\n    this.filtrar.emit(this.form.value);\r\n  }\r\n  \r\n  public getStatus(field: any): string {\r\n\r\n     if (field.valid) {\r\n       return 'success';\r\n     }\r\n\r\n     return 'danger';\r\n  }\r\n\r\n  public get inicio() {\r\n    return this.form.get('inicio');\r\n  }\r\n\r\n  public get final() {\r\n    return this.form.get('final');\r\n  }\r\n}\r\n","<nb-accordion>\r\n  <nb-accordion-item>\r\n    \r\n    <nb-accordion-item-header>\r\n      Filtros\r\n    </nb-accordion-item-header>\r\n\r\n    <nb-accordion-item-body [nbSpinner]=\"!loaded\">\r\n    \r\n      <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\" class=\"needs-validation\" novalidate >\r\n        \r\n        <div class=\"row\">\r\n          <div class=\"col-xl-6 col-md-6 col-12 form-group\">\r\n            <input \r\n                nbInput \r\n                fullWidth \r\n                class=\"form-control\"\r\n                placeholder=\"Inicio\" \r\n                [nbDatepicker]=\"inicioPicker\"\r\n                [formControl]=\"inicio\" \r\n                >\r\n              <nb-datepicker #inicioPicker>\r\n              </nb-datepicker>\r\n          </div>\r\n\r\n          <div class=\"col-xl-6 col-md-6  col-12 form-group\">\r\n            <input \r\n              nbInput \r\n              fullWidth \r\n              class=\"form-control\"\r\n              placeholder=\"Final\" \r\n              [nbDatepicker]=\"finalPicker\"\r\n              [formControl]=\"final\" \r\n              >\r\n            <nb-datepicker #finalPicker>\r\n            </nb-datepicker>\r\n          </div>\r\n\r\n          <div class=\"offset-xl-9 col-xl-3 offset-md-8 col-md-4 col-12 form-group\">\r\n            <button class=\"control-button form-control\" fullWidth nbButton type=\"submit\" >\r\n              Buscar\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n      </form>\r\n    </nb-accordion-item-body>\r\n  </nb-accordion-item>\r\n</nb-accordion>"]}